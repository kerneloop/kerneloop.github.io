<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="En este proyecto veremos lo que es un diodo de datos. Como bien indica en su nombre se trata de un conducto de informacion en un unico sentido. El objetivo será que el agente que envie informacion no sea capaz de recibirla, de manera que el sistema crítico se encontrará completamente aislado de comunicaciones externas y será capaz de transmitir información para su monitorización, registro y gestión.
Para empezar debemos entender que protocolos de comunicación vamos a utilizar en este ejercicio."><meta name=keywords content="homepage,blog,Networking"><meta name=robots content="noodp"><meta name=theme-color content><meta name=google-site-verification content="YhQZAUQSH3W-N-x073CFMBT3uNNrk7fydnypw99rtv0"><link rel=canonical href=https://kerneloop.github.io/posts/datadiode/><title>Data Diode :: Welcome to Kerneloop Blog! — A beautiful Blog
</title><link rel=stylesheet href=/main.min.244183cde1a38e0b08f82c11791181288f9aac1cc9618cd6f4e9e7710c5768ba.css integrity="sha256-JEGDzeGjjgsI+CwReRGBKI+arBzJYYzW9OnncQxXaLo=" crossorigin=anonymous><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="Data Diode"><meta itemprop=description content="En este proyecto veremos lo que es un diodo de datos. Como bien indica en su nombre se trata de un conducto de informacion en un unico sentido. El objetivo será que el agente que envie informacion no sea capaz de recibirla, de manera que el sistema crítico se encontrará completamente aislado de comunicaciones externas y será capaz de transmitir información para su monitorización, registro y gestión.
Para empezar debemos entender que protocolos de comunicación vamos a utilizar en este ejercicio."><meta itemprop=datePublished content="2025-08-18T20:47:16+02:00"><meta itemprop=dateModified content="2025-08-18T20:47:16+02:00"><meta itemprop=wordCount content="1101"><meta itemprop=image content="https://kerneloop.github.io/"><meta itemprop=keywords content="Networking"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kerneloop.github.io/"><meta name=twitter:title content="Data Diode"><meta name=twitter:description content="En este proyecto veremos lo que es un diodo de datos. Como bien indica en su nombre se trata de un conducto de informacion en un unico sentido. El objetivo será que el agente que envie informacion no sea capaz de recibirla, de manera que el sistema crítico se encontrará completamente aislado de comunicaciones externas y será capaz de transmitir información para su monitorización, registro y gestión.
Para empezar debemos entender que protocolos de comunicación vamos a utilizar en este ejercicio."><meta property="article:published_time" content="2025-08-18 20:47:16 +0200 CEST"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>Welcome to my Blog!</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/comandoslinux/>Commands</a></li><ul class=submenu><li class=dropdown><a href=http://youtube.com/@kerneloop class=dropbtn>YouTube</a><div class=dropdown-content></div></li></ul></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
6 minutes</p></div><article><h1 class=post-title><a href=/posts/datadiode/>Data Diode</a></h1><div class=post-content><p>En este proyecto veremos lo que es un <strong>diodo de datos</strong>. Como bien indica en su nombre se trata de un conducto de informacion en un unico sentido.
El objetivo será que el agente que envie informacion no sea capaz de recibirla, de manera que el sistema crítico se encontrará completamente aislado de comunicaciones
externas y será capaz de transmitir información para su monitorización, registro y gestión.</p><p>Para empezar debemos entender que protocolos de comunicación vamos a utilizar en este ejercicio.</p><p><img alt=Architecture1 src=/images/DataDiode/tcpudpblack.jpg></p><h3 id=tcp>TCP</h3><p>El protocolo TCP (Transmission Control Protocol) es un protocolo fundamental en la comunicación de datos a través de redes informáticas garantizando una transmisión confiable y ordenada de la información entre dispositivos.
Tiene un funcionamiento que se divide principalmente en <strong>tres partes:</strong></p><ul><li><strong>SYN</strong> -> El cliente inicia la conexión enviando un paquete SYN al servidor. Este paquete contiene un número de secuencia aleatorio que se utilizará para identificar los paquetes enviados por el cliente.</li><li><strong>SYN ACK</strong> -> El servidor, al recibir el SYN, responde con un paquete SYN-ACK. Este paquete incluye el número de secuencia del cliente incrementado en uno y un nuevo número de secuencia para la comunicación del servidor al cliente.</li><li><strong>ACK</strong> -> El cliente recibe el SYN-ACK y envía un último paquete ACK al servidor, confirmando la conexión y utilizando el número de secuencia del servidor incrementado en uno.</li></ul><p>Como podemos ver, en esta comunicacion se requiere contacto entre los dos agentes, tanto como para iniciar la conexion como para finalizarla.</p><h3 id=udp>UDP</h3><p>El protocolo UDP (User Datagram Protocol) es un protocolo de red que permite el envío de datos sin necesidad de establecer una conexión previa entre emisor y receptor, a diferencia de TCP.
Esto significa que <strong>UDP</strong> envía datagramas (paquetes de datos) de forma independiente y no garantiza la recepción, el orden ni la integridad de los datos. Su principal ventaja es la velocidad y eficiencia, ideal para aplicaciones donde la latencia es crítica, como streaming de video o juegos online.</p><p><strong>Funcionamiento:</strong></p><ul><li><strong>UDP</strong> divide los datos en paquetes (datagramas) y los envía a la dirección IP y puerto de destino, sin establecer una conexión formal.</li><li>No hay establecimiento de conexión previo ni confirmación de recepción, lo que permite una comunicación rápida.</li><li><strong>UDP</strong> no garantiza que los datagramas lleguen a destino, ni que lleguen en el orden correcto o sin errores.</li></ul><h2 id=entornos-de-uso>Entornos de uso</h2><p>Este tipo de dispositivos se situan en entornos críticos como Plantas Industriales/Nucleares, laboratorios de ciberseguridad o zonas de máxima seguridad.<br>Gracias a esta metodología seremos capaces de monitorizar desde un SOC exterior todo el entorno al otro lado del Diodo, pudiendo registrar y recibir lecturas
de temperatura en centrales industriales o evitando que un virus informático logre una conexion externa con un atacante mientras se hacen pruebas.</p><p><img alt=Architecture2 src=/images/DataDiode/datadiodetap.webp></p><h2 id=equipo-y-montaje>Equipo y Montaje</h2><p>Actualmente existen varios proveedores de dispositivos que realizan esta funcion y esta implementada directamente en el hardware que distribuyen.<br>Nosotros utilizaremos una solucion más económica y casera a traves de convertidores de Fibra Óptica a Cobre. Es importante que estos convertidores dispongan de dos
entradas (Rx) y salidas (Tx) ya que en esa division nos permitirá separar el tráfico para hacer el diodo.</p><p><img alt=Convertidores src=/images/DataDiode/Convertidor.jpg></p><p>Una vez tengamos estos dispositivos procederemos a conectar la fibra y el cobre de la siguiente manera:<br><img alt=Architecture3 src=/images/DataDiode/architecture.png></p><h3 id=funcionamiento>Funcionamiento</h3><p>Veremos que el equipo que envía se conecta directamente al equipo que recibe a traves de Tx y Rx sin embargo
hay un convertidor de fibra a cobre entre los dos equipos que no tiene salida de cobre, este será el &ldquo;vacio&rdquo;.
El equipo receptor intentará dar una respuesta, comprobará que la puede enviar, y la enviará a este &ldquo;vacio&rdquo; a través de Tx a Rx pero no será recibida por ningun equipo.<br>Este engaño se produce tambien para el equipo que envia ya que realizará una comprobacion en Rx para ver si puede recibir informacion en la red preparada, al estar conectado el cable
de fibra interpretará que la conexion es correcta pero nunca recibirá nada ya que viene de el convertidor &ldquo;vacio&rdquo;.</p><p><strong>¡IMPORTANTE!</strong><br>Los dos equipos no disponen de ningun servidor DHCP ni de ninguna figura intermediaria que sea capaz de redireccionar el trafico en la conexion.
Deberemos de preparar una direccion IP para cada uno y añadir en las tablas ARP las direcciones MAC de los dos equipos.<br>Utilizaremos el siguiente comando en una consola con permisos de administrador:</p><pre tabindex=0><code class=language-CMD/POWERSHELL data-lang=CMD/POWERSHELL>arp -s {direccion IP} {direccion mac}
</code></pre><p>Para comprobar que se ha añadido correctamente usaremos <strong>arp -a</strong>.</p><h2 id=puesta-en-marcha>Puesta en marcha</h2><p>Utilizaremos un rastreador de paquetes en el equipo que recibe de manera que cuando establezcamos una conexion TCP podramos ver la recepcion del paquete y un envio fallido de respuesta, por el contrario
en una conexion UDP podremos ver la recepcion del paquete y ninguna respuesta.</p><p>Existen multiples herramientas para rastrear esta conexion como <em><strong>tcpdump</strong></em> que funciona a nivel de consola o <em><strong>wireshark</strong></em> que posee una interfaz más amigable.</p><p>En este caso utilizaremos <em><strong>wireshark</strong></em> y lo prepararemos en la máquina receptora escuchando en la interfaz en la que estén conectados los equipos.</p><p>Ahora desde &ldquo;CMD&rdquo; enviaremos el comando de ping desde la maquina que envia a la que recibe, podremos ver como aparecen los mensajes en la interfaz, su origen y direccion.</p><p><img alt=Ping src=/images/DataDiode/ping.png></p><p>Podremos ver como la maquina receptora intenta devolver el ping, sin embargo en el equipo que inicia la conexion no estamos recibiendo respuesta.</p><p><img alt=Pingmal src=/images/DataDiode/pingmal.png></p><p>En cuanto a la conexion UDP enviaremos un mensaje al receptor con el la herramienta netcat y el comando <em><strong>nc64.exe</strong></em> <em><strong>-u</strong></em> <em><strong>192.168.2.12</strong></em> <em><strong>1234</strong></em>. Desde el lado del receptor estaremos escuchando en wireshark y abriremos una consola
de comandos &ldquo;CMD&rdquo; y escribiremos el siguiente comando <em><strong>nc64.exe</strong></em> <em><strong>-ulvp</strong></em> <em><strong>1234</strong></em>.</p><p>Una vez establecida esta conexion procederemos a escribir cualquier caracter en la consola del equipo que envia, podremos ver como aparece en la consola del que recibe. Desde <em><strong>wireshark</strong></em> se verá como llega el paquete con
su longitud y protocolo UDP.</p><p>Consola:
<img alt=UDPLetra src=/images/DataDiode/udpletra.png></p><p>Wireshark:
<img alt=UDP src=/images/DataDiode/udp.png></p><p>El flujo de los datos de este procedimiento será de la siguiente manera.</p><p><img alt=Architecture4 src=/images/DataDiode/architecturediode.png></p><h2 id=conclusion>Conclusion</h2><p>Este tipo de tecnologías se utilizan en entornos muy críticos, es imprescindible conocer el funcionamiento de las conexiones <em><strong>TCP</strong></em> y <em><strong>UDP</strong></em> que se van a utilizar para poder comprender el flujo de los datos.<br>De esta manera aseguramos un sistema en el que podremos recibir o enviar informacion exclusivamente en un sentido. A diferencia de un firewall que se regula por las reglas establecidas por el administrador de sistemas en cuestion,
este metodo asegura una imposibilidad de flujo más que <em><strong>logica</strong></em> &mldr;. <em><strong>ES</strong></em> <em><strong>FISICA!!</strong></em> El acceso a el sistema por la parte bloqueada del diodo esta restringida sin acceso fisico a la instalacion, lo cual da un <em><strong>grado</strong></em> <em><strong>de</strong></em> <em><strong>seguridad</strong></em> <em><strong>dificilmente</strong></em>
<em><strong>evadible</strong></em>.</p></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=/tags/networking/>Networking</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
1101 Words</p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
2025-08-18 20:47</p></div><hr><div class=sharing-buttons><a class=resp-sharing-button__link href="mailto:?subject=Data%20Diode&amp;body=https%3a%2f%2fkerneloop.github.io%2fposts%2fdatadiode%2f" target=_self rel=noopener aria-label title="Share via email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div></div></a><a class=resp-sharing-button__link href=https://www.instagram.com/kerneloop.project/ target=_blank rel=noopener aria-label title=Instagram><div class="resp-sharing-button resp-sharing-button--instagram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fkerneloop.github.io%2fposts%2fdatadiode%2f&amp;title=Data%20Diode&amp;summary=Data%20Diode&amp;source=https%3a%2f%2fkerneloop.github.io%2fposts%2fdatadiode%2f" target=_blank rel=noopener aria-label title="Share on linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></div></div></a></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=/posts/thuderdb/><span class=button__text>ThunderDB</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc+cxaJzDdCYbAW0X1G+DgZYvtKFXe6MBex8jUJ2JT25mQx+YjACIng=="></script></body></html>